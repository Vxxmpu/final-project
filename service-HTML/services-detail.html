<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î–µ—Ç–∞–ª–∏ —É—Å–ª—É–≥–∏</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../api.js"></script>
  <script src="../app.js"></script>
  
  <style>
    :root {
      --accent: #26c6da;
      --accent-dark: #0097a7;
      --text: #1a3c34;
      --muted: #5f7a75;
      --bg: #f5fcff;
      --border: #b2ebf2;
      --shadow: 0 6px 20px rgba(38, 198, 218, 0.12);
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, var(--bg) 0%, #e0f7fa 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Header */
    header {
      position: sticky;
      top: 0;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .container {
      max-width: 1240px;
      margin: 0 auto;
      padding: 0 20px;
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 0;
    }

    .logo {
      font-size: 1.6rem;
      font-weight: 700;
      text-decoration: none;
      color: var(--accent-dark);
      transition: opacity 0.3s;
    }

    .logo span { color: var(--accent); }

    .nav-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .crt-badge {
      display:flex; align-items:center; gap:10px; padding:8px 14px; background:#e0f7fa; border-radius:50px; border:1px solid var(--border); cursor:pointer; transition: all 0.25s ease;
    }
    .crt-badge:hover{ background:var(--accent); color:white; transform:translateY(-2px); box-shadow:var(--shadow); }
    .crt-icon{ width:26px; height:26px; background:var(--accent); color:white; border-radius:50%; display:grid; place-items:center; font-weight:bold; font-size:13px; }

    /* Main Content */
    main {
      flex: 1;
      max-width: 1200px;
      width: 100%;
      margin: 40px auto;
      padding: 0 20px;
    }

    .service-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: center;
    }

    .service-image {
      position: relative;
    }

    .service-image img {
      width: 100%;
      max-width: 400px;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }
    
    .service-info {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    }
    
    .service-info h1 {
      font-size: 2.5rem;
      color: var(--accent-dark);
      margin-bottom: 20px;
      font-weight: 700;
    }
    
    .service-info p {
      font-size: 1.05rem;
      line-height: 1.8;
      color: var(--muted);
      margin-bottom: 30px;
    }
    
    /* Payment Section */
    .payment-section {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 2px solid var(--border);
    }
    
    .payment-section h3 {
      font-size: 1.4rem;
      color: var(--text);
      margin-bottom: 20px;
      font-weight: 600;
    }
    
    .payment-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .pay-btn {
      padding: 16px 24px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .pay-onsite {
      background: #f5f5f5;
      color: var(--text);
      border: 2px solid #e0e0e0;
    }
    
    .pay-onsite:hover {
      background: #eeeeee;
      border-color: var(--muted);
      transform: translateX(5px);
    }
    
    .pay-card {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      color: white;
      box-shadow: var(--shadow);
    }
    
    .pay-card:hover {
      transform: translateX(5px);
      box-shadow: 0 10px 30px rgba(38, 198, 218, 0.25);
    }
    
    .pay-token {
      background: linear-gradient(135deg, #00796b 0%, #004d40 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(0, 121, 107, 0.15);
    }
    
    .pay-token:hover {
      transform: translateX(5px);
      box-shadow: 0 10px 30px rgba(0, 121, 107, 0.25);
    }
    
    /* Price Table */
    .price-table {
      margin-top: 30px;
      overflow-x: auto;
    }
    
    .price-table table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .price-table th {
      background: var(--accent);
      color: white;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
    }
    
    .price-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      color: var(--text);
    }
    
    .price-table tr:hover {
      background: #f9f9f9;
    }
    
    .price-table tr:last-child td {
      border-bottom: none;
    }
    
    /* Footer */
    footer {
      background: var(--accent);
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 60px;
      font-size: 0.95rem;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .service-container {
        grid-template-columns: 1fr;
        gap: 30px;
      }
      
      .service-info {
        padding: 25px;
      }
      
      .service-info h1 {
        font-size: 1.8rem;
      }
      
      .payment-buttons {
        flex-direction: column;
      }
      
      .header-title {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="container">
      <nav>
        <a href="../index.html" style="text-decoration:none;"><div class="logo">Private<span>Clinic</span></div></a>
        <div class="nav-actions">
          <a href="services.html" class="btn nav-btn">–£—Å–ª—É–≥–∏</a>
          <div id="crtBadge" class="crt-badge">
            <div class="crt-icon">C</div>
            <span id="crtAmount">0.00 CRT</span>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <div class="service-container">
      <div class="service-image">
        <img id="detailImg" src="" alt="–£—Å–ª—É–≥–∞" />
      </div>
      
      <div class="service-info">
        <h1 id="title">–£—Å–ª—É–≥–∞</h1>
        <p id="longDesc">–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å.</p>
        
        <div class="payment-section">
          <h3>üí≥ –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h3>
          <div class="payment-buttons">
            <button class="pay-btn pay-onsite">üìç –û–ø–ª–∞—Ç–∏—Ç—å –Ω–∞ –º–µ—Å—Ç–µ</button>
            <button class="pay-btn pay-card">üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π</button>
            <button class="pay-btn pay-token">üîê –û–ø–ª–∞—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω–æ–º</button>
          </div>
          
          <div class="price-table">
            <table>
              <thead>
                <tr>
                  <th>–£—Å–ª—É–≥–∞</th>
                  <th>–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞</th>
                </tr>
              </thead>
              <tbody id="priceTableBody">
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    ¬© 2026 –ß–∞—Å—Ç–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
  </footer>

<script>
const services = {
  urine: {
    title: "Urinalysis",
    long: "Laboratory urine test for infections and kidney disorders.",
    img: "../images/–∞–Ω–∞–ª–∏–∑–ö–∞–ª–∞.jpg",
    usd: 12,
    crt: 0.12
  },
  stool: {
    title: "Stool test",
    long: "Laboratory stool analysis for parasites and bacteria.",
    img: "../images/–∞–Ω–∞–ª–∏–∑–ö–∞–ª–∞.jpg",
    usd: 12,
    crt: 0.12
  },
  blood: {
    title: "Blood test",
    long: "General and biochemical blood analysis.",
    img: "../images/–∞–Ω–∞–ª–∏–∑–ö—Ä–æ–≤–∏.jpg",
    usd: 18,
    crt: 0.18
  },
  xray: {
    title: "X-Ray",
    long: "X-ray imaging diagnostics.",
    img: "../images/–†–µ–Ω–≥—Ç–µ–Ω.png",
    usd: 35,
    crt: 0.35
  },
  ecg: {
    title: "ECG",
    long: "Heart rhythm diagnostics.",
    img: "../images/–≠–ö–ì.png",
    usd: 20,
    crt: 0.20
  },
  ultrasound: {
    title: "Ultrasound",
    long: "Ultrasound diagnostics of internal organs.",
    img: "../images/–£–ó–ò.jpg",
    usd: 45,
    crt: 0.45
  },
  mri: {
    title: "MRI",
    long: "Magnetic resonance imaging.",
    img: "../images/–ú–†–¢.jpg",
    usd: 140,
    crt: 1.40
  },
  vaccination: {
    title: "Vaccination",
    long: "Preventive vaccination service.",
    img: "../images/–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è.jpeg",
    usd: 22,
    crt: 0.22
  },
  physiotherapy: {
    title: "Physiotherapy",
    long: "Rehabilitation and recovery procedures.",
    img: "../images/–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–∏—è.jpg",
    usd: 28,
    crt: 0.28
  },
  dentistry: {
    title: "Dentistry",
    long: "Dental services and treatment.",
    img: "../images/–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è.jpeg",
    usd: 60,
    crt: 0.60
  },
  ophthalmology: {
    title: "Ophthalmology",
    long: "Eye diagnostics and treatment.",
    img: "../images/–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è.webp",
    usd: 42,
    crt: 0.42
  },
  endocrinology: {
    title: "Endocrinology",
    long: "Hormonal diagnostics and treatment.",
    img: "../images/–≠–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∏—è.jpg",
    usd: 35,
    crt: 0.35
  }
};

function getParam(name) {
  return new URL(window.location.href).searchParams.get(name);
}

const titleEl = document.getElementById("title");
const descEl  = document.getElementById("longDesc");
const imgEl   = document.getElementById("detailImg");
const priceTableBody = document.getElementById("priceTableBody");

const payOnsite = document.querySelector(".pay-onsite");
const payCard   = document.querySelector(".pay-card");
const payToken  = document.querySelector(".pay-token");

const badge = document.getElementById("crtBadge");

const id = getParam("id");
const s = services[id];

if(!s){
  titleEl.textContent = "Service not found";
  descEl.textContent = "Please select a service from the services page.";
}else{
  titleEl.textContent = s.title;
  descEl.textContent  = s.long;
  imgEl.src = s.img;

  priceTableBody.innerHTML = `
    <tr>
      <td>${s.title}</td>
      <td>$${s.usd} / ${s.crt} CRT</td>
    </tr>
  `;
}

/* ----------------------------
   Badge
-----------------------------*/
if(badge){
  badge.onclick = () => {
    location.href = "../buyToken.html";
  };
}

/* ----------------------------
   Payments
-----------------------------*/

if(payOnsite && s){
  payOnsite.onclick = () => {
    alert(`Pay on site: $${s.usd}`);
  };
}

if(payCard && s){
  payCard.onclick = () => {

    // –ø–µ—Ä–µ–¥–∞—ë–º —Ü–µ–Ω—É –í –î–û–õ–õ–ê–†–ê–•
    location.href =
      `../pay.html?method=card&id=${id}&usd=${s.usd}`;
  };
}

if(payToken && s){
  payToken.onclick = () => {

    // –ø–µ—Ä–µ–¥–∞—ë–º —Ü–µ–Ω—É –í CRT
    location.href =
      `../pay.html?method=token&id=${id}&crt=${s.crt}`;
  };
}

/* badge init from your app.js */
window.addEventListener("load", async () => {
  if(window.initializeAndUpdateBadge){
    await initializeAndUpdateBadge();
  }
});

if(window.ethereum){
  window.ethereum.on("accountsChanged", async () => {
    if(window.initializeAndUpdateBadge){
      await initializeAndUpdateBadge();
    }
  });

  window.ethereum.on("chainChanged", () => {
    location.reload();
  });
}
</script>

  <script src="../serviceScript/services.js"></script>
  <script src="../serviceScript/services-detail.js"></script>

</body>
</html>
