<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î–µ—Ç–∞–ª–∏ —É—Å–ª—É–≥–∏</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../database/db-functions.js"></script>
  <script src="../app.js"></script>
  
  <style>
    :root {
      --accent: #26c6da;
      --accent-dark: #0097a7;
      --text: #1a3c34;
      --muted: #5f7a75;
      --bg: #f5fcff;
      --border: #b2ebf2;
      --shadow: 0 6px 20px rgba(38, 198, 218, 0.12);
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, var(--bg) 0%, #e0f7fa 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Header */
    header {
      position: sticky;
      top: 0;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .container {
      max-width: 1240px;
      margin: 0 auto;
      padding: 0 20px;
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 0;
    }

    .logo {
      font-size: 1.6rem;
      font-weight: 700;
      text-decoration: none;
      color: var(--accent-dark);
      transition: opacity 0.3s;
    }

    .logo span { color: var(--accent); }

    .nav-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .crt-badge {
      display:flex; align-items:center; gap:10px; padding:8px 14px; background:#e0f7fa; border-radius:50px; border:1px solid var(--border); cursor:pointer; transition: all 0.25s ease;
    }
    .crt-badge:hover{ background:var(--accent); color:white; transform:translateY(-2px); box-shadow:var(--shadow); }
    .crt-icon{ width:26px; height:26px; background:var(--accent); color:white; border-radius:50%; display:grid; place-items:center; font-weight:bold; font-size:13px; }

    /* Main Content */
    main {
      flex: 1;
      max-width: 1200px;
      width: 100%;
      margin: 40px auto;
      padding: 0 20px;
    }

    .service-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: center;
    }

    .service-image {
      position: relative;
    }

    .service-image img {
      width: 100%;
      max-width: 400px;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }
    
    .service-info {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    }
    
    .service-info h1 {
      font-size: 2.5rem;
      color: var(--accent-dark);
      margin-bottom: 20px;
      font-weight: 700;
    }
    
    .service-info p {
      font-size: 1.05rem;
      line-height: 1.8;
      color: var(--muted);
      margin-bottom: 30px;
    }
    
    /* Payment Section */
    .payment-section {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 2px solid var(--border);
    }
    
    .payment-section h3 {
      font-size: 1.4rem;
      color: var(--text);
      margin-bottom: 20px;
      font-weight: 600;
    }
    
    .payment-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .pay-btn {
      padding: 16px 24px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .pay-onsite {
      background: #f5f5f5;
      color: var(--text);
      border: 2px solid #e0e0e0;
    }
    
    .pay-onsite:hover {
      background: #eeeeee;
      border-color: var(--muted);
      transform: translateX(5px);
    }
    
    .pay-card {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      color: white;
      box-shadow: var(--shadow);
    }
    
    .pay-card:hover {
      transform: translateX(5px);
      box-shadow: 0 10px 30px rgba(38, 198, 218, 0.25);
    }
    
    .pay-token {
      background: linear-gradient(135deg, #00796b 0%, #004d40 100%);
      color: white;
      box-shadow: 0 6px 20px rgba(0, 121, 107, 0.15);
    }
    
    .pay-token:hover {
      transform: translateX(5px);
      box-shadow: 0 10px 30px rgba(0, 121, 107, 0.25);
    }
    
    /* Price Table */
    .price-table {
      margin-top: 30px;
      overflow-x: auto;
    }
    
    .price-table table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .price-table th {
      background: var(--accent);
      color: white;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
    }
    
    .price-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      color: var(--text);
    }
    
    .price-table tr:hover {
      background: #f9f9f9;
    }
    
    .price-table tr:last-child td {
      border-bottom: none;
    }
    
    /* Footer */
    footer {
      background: var(--accent);
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 60px;
      font-size: 0.95rem;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .service-container {
        grid-template-columns: 1fr;
        gap: 30px;
      }
      
      .service-info {
        padding: 25px;
      }
      
      .service-info h1 {
        font-size: 1.8rem;
      }
      
      .payment-buttons {
        flex-direction: column;
      }
      
      .header-title {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="container">
      <nav>
        <a href="../index.html" style="text-decoration:none;"><div class="logo">Private<span>Clinic</span></div></a>
        <div class="nav-actions">
          <a href="services.html" class="btn nav-btn">–£—Å–ª—É–≥–∏</a>
          <div id="crtBadge" class="crt-badge">
            <div class="crt-icon">C</div>
            <span id="crtAmount">0.00 CRT</span>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <div class="service-container">
      <div class="service-image">
        <img id="detailImg" src="" alt="–£—Å–ª—É–≥–∞" />
      </div>
      
      <div class="service-info">
        <h1 id="title">–£—Å–ª—É–≥–∞</h1>
        <p id="longDesc">–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å.</p>
        
        <div class="payment-section">
          <h3>üí≥ –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h3>
          <div class="payment-buttons">
            <button class="pay-btn pay-onsite">üìç –û–ø–ª–∞—Ç–∏—Ç—å –Ω–∞ –º–µ—Å—Ç–µ</button>
            <button class="pay-btn pay-card">üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π</button>
            <button class="pay-btn pay-token">üîê –û–ø–ª–∞—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω–æ–º</button>
          </div>
          
          <div class="price-table">
            <table>
              <thead>
                <tr>
                  <th>–£—Å–ª—É–≥–∞</th>
                  <th>–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞</th>
                </tr>
              </thead>
              <tbody id="priceTableBody">
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    ¬© 2026 –ß–∞—Å—Ç–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
  </footer>

  <script>
    const services = {
      urine: {title: '–ê–Ω–∞–ª–∏–∑ –º–æ—á–∏', long: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–µ–∫—Ü–∏–π, –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –ø–æ—á–µ–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è —É—Ä–æ–≤–Ω—è —Å–∞—Ö–∞—Ä–∞. –ê–Ω–∞–ª–∏–∑ –º–æ—á–∏ –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ—á–µ–ø–æ–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ—Ç–æ–≤—ã –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è.', img: '../images/–∞–Ω–∞–ª–∏–∑–ö–∞–ª–∞.jpg', price: 5000},
      stool: {title: '–ê–Ω–∞–ª–∏–∑ –∫–∞–ª–∞', long: '–¢–µ—Å—Ç –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–∞—Ä–∞–∑–∏—Ç–æ–≤, –±–∞–∫—Ç–µ—Ä–∏–π –∏ –ø—Ä–æ–±–ª–µ–º –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è. –≠—Ç–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—ã—è–≤–ª—è–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è –≤ —Ä–∞–±–æ—Ç–µ –∂–µ–ª—É–¥–æ—á–Ω–æ-–∫–∏—à–µ—á–Ω–æ–≥–æ —Ç—Ä–∞–∫—Ç–∞ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –¥–∏–∞—Ä–µ–∏ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–±–ª–µ–º. –ê–Ω–∞–ª–∏–∑ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–µ–Ω –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–∑–∏—Ç–æ–≤ –∏ –∫–∏—à–µ—á–Ω—ã—Ö –∏–Ω—Ñ–µ–∫—Ü–∏–π.', img: '../images/–∞–Ω–∞–ª–∏–∑–ö–∞–ª–∞.jpg', price: 5000},
      blood: {title: '–ê–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏', long: '–û–±—â–∏–π –∏ –±–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫—Ä–æ–≤–∏ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—ã—è–≤–ª—è–µ—Ç –∞–Ω–µ–º–∏—é, –∏–Ω—Ñ–µ–∫—Ü–∏–∏ –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤. –ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—á–µ–Ω–∏, –ø–æ—á–µ–∫ –∏ —É—Ä–æ–≤–µ–Ω—å —Å–∞—Ö–∞—Ä–∞.', img: '../images/–∞–Ω–∞–ª–∏–∑–ö—Ä–æ–≤–∏.jpg', price: 7000},
      xray: {title: '–†–µ–Ω—Ç–≥–µ–Ω', long: '–†–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ–ª–æ–º–æ–≤, –ø–∞—Ç–æ–ª–æ–≥–∏–π –ª–µ–≥–∫–∏—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ú–µ—Ç–æ–¥ –±—ã—Å—Ç—Ä—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—è–≤–∏—Ç—å –ø–Ω–µ–≤–º–æ–Ω–∏—é, —Ç—É–±–µ—Ä–∫—É–ª—ë–∑ –∏ –¥—Ä—É–≥–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–æ–≤ –≥—Ä—É–¥–Ω–æ–π –∫–ª–µ—Ç–∫–∏.', img: '../images/–†–µ–Ω–≥—Ç–µ–Ω.png', price: 15000},
      ecg: {title: '–≠–ö–ì', long: '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–¥—Ü–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∞—Ä–∏—Ç–º–∏–π –∏ –∏—à–µ–º–∏–∏. –≠–ö–ì –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –º–∏–Ω—É—Ç –∏ –¥–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–±–æ—Ç–µ —Å–µ—Ä–¥—Ü–∞. –≠—Ç–æ –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ —Å–µ—Ä–¥–µ—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.', img: '../images/–≠–ö–ì.png', price: 8000},
      ultrasound: {title: '–£–ó–ò', long: '–£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π –º–µ—Ç–æ–¥ –±–µ–∑ –∏–∑–ª—É—á–µ–Ω–∏—è. –£–ó–ò –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä, —Ñ–æ—Ä–º—É –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ä–≥–∞–Ω–æ–≤. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—Ä–≥–∞–Ω–æ–≤ –±—Ä—é—à–Ω–æ–π –ø–æ–ª–æ—Å—Ç–∏, –ø–æ—á–µ–∫ –∏ –º–æ—á–µ–≤–æ–≥–æ –ø—É–∑—ã—Ä—è.', img: '../images/–£–ó–ò.jpg', price: 20000},
      mri: {title: '–ú–†–¢', long: '–ú–∞–≥–Ω–∏—Ç–Ω–æ-—Ä–µ–∑–æ–Ω–∞–Ω—Å–Ω–∞—è —Ç–æ–º–æ–≥—Ä–∞—Ñ–∏—è –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º—è–≥–∫–∏—Ö —Ç–∫–∞–Ω–µ–π. –ú–†–¢ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–≥–Ω–∏—Ç–Ω—ã–µ –ø–æ–ª—è –≤–º–µ—Å—Ç–æ —Ä–µ–Ω—Ç–≥–µ–Ω–∞ –∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ–ø—É—Ö–æ–ª–µ–π, –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–æ–∑–≥–∞ –∏ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞.', img: '../images/–ú–†–¢.jpg', price: 60000},
      vaccination: {title: '–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è', long: '–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–≤–∏–≤–∫–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∏–Ω—Ñ–µ–∫—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∞–∫—Ü–∏–Ω—ã, –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –í–û–ó. –í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≥—Ä–∏–ø–ø–∞, –ø–Ω–µ–≤–º–æ–Ω–∏–∏, –∫–æ—Ä–∏ –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–∞—Å–Ω—ã—Ö –∏–Ω—Ñ–µ–∫—Ü–∏–π.', img: '../images/–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è.jpeg', price: 10000},
      physiotherapy: {title: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–∏—è', long: '–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Ç—Ä–∞–≤–º –∏ –æ–ø–µ—Ä–∞—Ü–∏–π. –§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–∏—è –ø–æ–º–æ–≥–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å –∏ —É–º–µ–Ω—å—à–∏—Ç—å –±–æ–ª—å. –í–∫–ª—é—á–∞–µ—Ç –º–∞—Å—Å–∞–∂, —ç–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ä–∞–ø–∏—é, –º–∞–≥–Ω–∏—Ç–æ—Ç–µ—Ä–∞–ø–∏—é –∏ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã.', img: '../images/–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–∏—è.jpg', price: 12000},
      dentistry: {title: '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è', long: '–õ–µ—á–µ–Ω–∏–µ –∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –∑—É–±–æ–≤ –∏ –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞. –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —á–∏—Å—Ç–∫—É, –ø–ª–æ–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –∏–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—é –∑—É–±–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≥–∏–≥–∏–µ–Ω–µ –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞ –≤—Ö–æ–¥–∏—Ç –≤ –∫–∞–∂–¥—ã–π –≤–∏–∑–∏—Ç.', img: '../images/–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è.jpeg', price: 25000},
      ophthalmology: {title: '–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è', long: '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ª–µ—á–µ–Ω–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –≥–ª–∞–∑, –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –∑—Ä–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç—Ä–æ—Ç—ã –∑—Ä–µ–Ω–∏—è, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞—Ç–∞—Ä–∞–∫—Ç—ã, –≥–ª–∞—É–∫–æ–º—ã –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–±–ª–µ–º. –ú—ã –ø–æ–º–æ–≥–∞–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—á–∫–∏ –∏–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –ª–∏–Ω–∑—ã.', img: '../images/–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è.webp', price: 18000},
      endocrinology: {title: '–≠–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∏—è', long: '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ª–µ—á–µ–Ω–∏–µ –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π –∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π —â–∏—Ç–æ–≤–∏–¥–Ω–æ–π –∂–µ–ª–µ–∑—ã. –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∏–∞–±–µ—Ç–æ–º, –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —â–∏—Ç–æ–≤–∏–¥–Ω–æ–π –∂–µ–ª–µ–∑—ã –∏ –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–º–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è–º–∏. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ª–µ—á–µ–Ω–∏—é –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞.', img: '../images/–≠–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∏—è.jpg', price: 15000}
    };

    function getParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    // Initialize elements
    const titleEl = document.getElementById('title');
    const descEl = document.getElementById('longDesc');
    const imgEl = document.getElementById('detailImg');
    const priceTableBody = document.getElementById('priceTableBody');
    const badge = document.getElementById("crtBadge");
    const payOnsite = document.querySelector('.pay-onsite');
    const payCard = document.querySelector('.pay-card');
    const payToken = document.querySelector('.pay-token');

    const id = getParam('id');
    let s = null;

    if (id && services[id]) {
      s = services[id];
    }

    if (!id || !s) {
      titleEl.textContent = '–£—Å–ª—É–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞';
      descEl.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Å–ª—É–≥.';
      imgEl.src = '';
      priceTableBody.innerHTML = '';
    } else {
      titleEl.textContent = s.title;
      descEl.textContent = s.long;
      imgEl.src = s.img;
      imgEl.alt = s.title;

      priceTableBody.innerHTML = `
        <tr>
          <td>${s.title}</td>
          <td>${s.price.toLocaleString('ru-RU')} KZT</td>
        </tr>
      `;
    }

    // CRT Badge click handler
    if (badge) {
      badge.addEventListener("click", () => { 
        window.location.href = "../buyToken.html"; 
      });
    }

    // Payment buttons
    if (payOnsite && s) {
      payOnsite.addEventListener('click', () => {
        alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ –æ–ø–ª–∞—Ç—É –Ω–∞ –º–µ—Å—Ç–µ. –°—É–º–º–∞: ${s.price.toLocaleString('ru-RU')} KZT`);
      });
    }

    if (payCard && s) {
      payCard.addEventListener('click', () => {
        alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ –æ–ø–ª–∞—Ç—É –∫–∞—Ä—Ç–æ–π. –°—É–º–º–∞: ${s.price.toLocaleString('ru-RU')} KZT`);
      });
    }

    if (payToken && s) {
      payToken.addEventListener('click', async () => {
        const discount = 0.15;
        const charityPercent = 0.10;
        const priceCRT = s.price * (1 - discount);
        const charityAmount = priceCRT * charityPercent;
        const finalAmount = priceCRT - charityAmount;

        if (!confirm(
          `–í—ã –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç–µ —Ç–æ–∫–µ–Ω–∞–º–∏.\n` +
          `–¶–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π: ${priceCRT.toLocaleString('ru-RU')} KZT\n` +
          `Charity (10%): ${charityAmount.toLocaleString('ru-RU')} KZT\n` +
          `–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∫ —Å–ø–∏—Å–∞–Ω–∏—é: ${finalAmount.toLocaleString('ru-RU')} KZT\n` +
          `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?`
        )) return;

        try {
          await redeem(finalAmount, s.title);
          alert('–£—Å–ª—É–≥–∞ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω–∞ —Ç–æ–∫–µ–Ω–∞–º–∏!');
        } catch (err) {
          console.error(err);
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ —Ç–æ–∫–µ–Ω–∞–º–∏: ' + (err.reason || err.message));
        }
      });
    }
    
    // Initialize on page load
    window.addEventListener("load", async () => {
      await initializeAndUpdateBadge();
    });
    
    // Listen for account changes
    if (window.ethereum) {
      window.ethereum.on("accountsChanged", async () => {
        await initializeAndUpdateBadge();
      });
      
      window.ethereum.on("chainChanged", () => {
        window.location.reload();
      });
    }
  </script>
  <script src="../serviceScript/services.js"></script>
  <script src="../serviceScript/services-detail.js"></script>

</body>
</html>
